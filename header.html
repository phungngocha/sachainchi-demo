<!DOCTYPE html>
<html lang="vi">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <title>Header Responsive</title> -->

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">

  <style>
    body { margin:0; font-family:'Quicksand', sans-serif; background:#f0e6e6; }
    .navbar { background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.1); transition:0.3s; }
    .navbar:hover { box-shadow:0 4px 15px rgba(0,0,0,0.15); }
    .navbar-brand img { height:55px; border-radius:10px; filter:brightness(1.05) contrast(1.1);}
    .navbar-brand h1 { font-size:20px; color:#009933; margin:0; font-weight:700;}
    .navbar-brand small { color:#009933; font-size:13px;}
    .nav-link { color:#333 !important; font-size:15px; border-radius:6px; padding:8px 12px; transition:0.3s;}
    .nav-link:hover { background:#009933 !important; color:#fff !important; }
    .search-box { position:relative; }
    .search-box input { padding-left:38px; border-radius:25px; border:1px solid #ccc; background:#f9f9f9; }
    .search-box input:focus { background:#fff; box-shadow:0 0 8px rgba(14,165,233,0.3); border-color:#339900; }
    .search-box .bi-search { position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#888; font-size:18px;}
    .cart-btn, .auth-link { background:#009933; border-radius:20px; padding:6px 15px; color:#fff !important; text-decoration:none; font-weight:500; transition:0.3s; }
    .cart-btn:hover, .auth-link:hover { background:#009900; }
    #userAvatar img { border:2px solid #009900; border-radius:50%; transition:0.2s; }
    #userAvatar img:hover { transform:scale(1.1);}
    #username { color:#009900; font-weight:600;}

    /* MOBILE */
    @media(max-width:992px){
      .navbar-collapse { text-align:center; background:#fff; border-radius:12px; margin-top:10px; padding:10px 0;}
      .navbar-nav { margin-bottom:1rem; }
      .search-box { width:85%; margin:0 auto 15px; }
      .search-box input { height:38px; font-size:14px; }
      .cart-btn, .auth-link { display:inline-block; width:70%; max-width:260px; margin:6px auto; text-align:center; border-radius:25px; font-size:15px; padding:8px 0; font-weight:600;}
      .navbar-brand img { height:48px; }
      .navbar-brand h1 { font-size:18px; margin-bottom:2px; }
      .navbar-brand small { font-size:12px; color:#009933; }
    }
  </style>
  
<body>

<nav class="navbar navbar-expand-lg sticky-top">
  <div class="container">
    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
      <img src="img/logokochu.png" alt="logo">
      <div>
        <h1>NutriInchi</h1>
        <small>H·∫°t l√†nh - S·ªëng xanh</small>
      </div>
    </a>

    <!-- Toggle -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Menu -->
    <div class="collapse navbar-collapse justify-content-end" id="mainNav">
      <ul class="navbar-nav me-3">
        <li class="nav-item"><a href="index.html" class="nav-link">Trang ch·ªß</a></li>
        <li class="nav-item"><a href="Nutrilnchi.html" class="nav-link">NutriInChi</a></li>
        <li class="nav-item"><a href="products.html" class="nav-link">S·∫£n ph·∫©m</a></li>
        <li class="nav-item"><a href="tintuc.html" class="nav-link">Tin t·ª©c</a></li>
        <li class="nav-item"><a href="lienhe.html" class="nav-link">Li√™n h·ªá</a></li>
      </ul>

      <!-- Search -->
      <form class="d-flex me-3 search-box">
        <i class="bi bi-search"></i>
        <input id="searchInput" class="form-control" type="search" placeholder="T√¨m s·∫£n ph·∫©m...">
      </form>

      <!-- Cart -->
      <a href="cart.html" class="cart-btn me-3">üõí <span id="cartCount">0</span></a>

      <!-- Auth -->
      <div class="d-flex align-items-center gap-2">
        <a href="login.html" class="auth-link" id="loginBtn">ƒêƒÉng nh·∫≠p</a>
        <a href="register.html" class="auth-link" id="registerBtn">ƒêƒÉng k√Ω</a>

        <!-- Avatar -->
        <div id="userAvatar" style="display:none; position:relative; align-items:center; gap:8px; cursor:pointer;">
          <div class="d-flex align-items-center gap-2">
            <img id="avatarImg" src="img/avata.png" alt="avatar" width="40" height="40" style="object-fit:cover; border-radius:50%;">
            <span id="username"></span>
          </div>

          <div id="logoutDropdown" style="display:none; position:absolute; top:50px; left:0; background:#fff; border:1px solid #ccc; border-radius:8px; padding:8px 12px; min-width:120px; box-shadow:0 4px 10px rgba(0,0,0,0.1); z-index:100;">
            <button id="logoutBtn" style="width:100%; padding:6px 0; border:none; background:#16a34a; color:#fff; border-radius:6px; cursor:pointer;">ƒêƒÉng xu·∫•t</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const loggedInUser = JSON.parse(sessionStorage.getItem("loggedInUser"));
const loginBtn = document.getElementById("loginBtn");
const registerBtn = document.getElementById("registerBtn");
const userAvatar = document.getElementById("userAvatar");
const username = document.getElementById("username");
const logoutDropdown = document.getElementById("logoutDropdown");
const logoutBtn = document.getElementById("logoutBtn");

if (loggedInUser) {
  loginBtn.style.display = "none";
  registerBtn.style.display = "none";
  userAvatar.style.display = "flex";
  username.textContent = loggedInUser.name;

  userAvatar.addEventListener("click",(e)=>{
    e.stopPropagation();
    logoutDropdown.style.display = logoutDropdown.style.display === "none" ? "block":"none";
  });

  logoutBtn.addEventListener("click",()=>{
    sessionStorage.removeItem("loggedInUser");
    window.location.reload();
  });

  document.addEventListener("click",()=>{ logoutDropdown.style.display="none"; });
}

// T√¨m ki·∫øm
const searchInput = document.getElementById("searchInput");
if(searchInput){
  searchInput.addEventListener("keypress",(e)=>{
    if(e.key==="Enter"){
      e.preventDefault();
      const keyword = searchInput.value.trim();
      if(keyword) window.location.href=`search.html?query=${encodeURIComponent(keyword)}`;
    }
  });
}
</script>

</body>
</html>
