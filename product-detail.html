<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chi ti·∫øt s·∫£n ph·∫©m - NutriInChi</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
   /* --- To√†n trang --- */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f9f9f9;
}

main {
  max-width: 1200px;
  margin: 40px auto;
  padding: 20px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* --- Chi ti·∫øt s·∫£n ph·∫©m --- */
.product-detail {
  display: flex;
  gap: 40px;
  flex-wrap: wrap;
}

.product-detail img {
  width: 100%;
  max-width: 450px;
  border-radius: 8px;
  object-fit: cover;
}

.product-info {
  flex: 1;
}

.product-info h2 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 15px;
  line-height: 1.3;
}

/* --- N√∫t ch·ªçn lo·∫°i s·∫£n ph·∫©m --- */
.option-btn {
  padding: 6px 12px;       /* nh·ªè g·ªçn h∆°n, c√¢n ƒë·ªëi v·ªõi ti√™u ƒë·ªÅ */
  border: 1px solid #009933;
  border-radius: 6px;
  background: #fff;
  color: #009933;
  font-size: 14px;         /* v·ª´a v·ªõi ti√™u ƒë·ªÅ */
  font-weight: 500;
  cursor: pointer;
  transition: 0.2s;
  height: 32px;            /* t·∫°o chi·ªÅu cao ƒë·ªìng ƒë·ªÅu */
  display: flex;
  align-items: center;
  justify-content: center;
}

.option-btn:hover {
  background: #16a34a;
  color: #fff;
}

.option-btn.active {
  background: #16a34a;
  color: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* Gi·∫£m margin th·ª´a */
.option-group, .qty-box, .price-box {
  margin: 0 !important;
}

#weightOptions {
  display: flex;
  gap: 8px;                /* kho·∫£ng c√°ch nh·ªè gi·ªØa c√°c n√∫t */
}


/* --- Gi√° s·∫£n ph·∫©m --- */
.price-box {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 15px 0;
}

.price-main {
  font-size: 28px;
  font-weight: 700;
  color: #16a34a;
}

.old-price {
  font-size: 18px;
  color: #888;
  text-decoration: line-through;
}

/* √Åp d·ª•ng box-sizing cho t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ ƒë·ªÉ t√≠nh chi·ªÅu cao d·ªÖ h∆°n */
* {
  box-sizing: border-box;
}

/* S·ªë l∆∞·ª£ng */
.qty-box {
  display: flex;
  align-items: stretch; /* cho t·∫•t c·∫£ c√πng cao */
  gap: 4px; /* kho·∫£ng c√°ch nh·ªè gi·ªØa n√∫t v√† input */
}

.qty-btn {
  width: 30px;         /* nh·ªè l·∫°i */
  height: 30px;        /* nh·ªè l·∫°i */
  border: 1px solid #ccc;
  background: #fff;
  font-size: 16px;     /* v·ª´a v·ªõi chi·ªÅu cao */
  font-weight: 600;
  cursor: pointer;
  border-radius: 0;
}

.qty-btn:first-child {
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

.qty-btn:last-child {
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
}

.qty-btn:hover {
  background: #f0f0f0;
}

/* ·∫®n n√∫t tƒÉng gi·∫£m m·∫∑c ƒë·ªãnh */
.qty-input::-webkit-outer-spin-button,
.qty-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.qty-input {
  width: 40px;          /* nh·ªè l·∫°i */
  text-align: center;
  border: 1px solid #ccc;
  border-left: 0;
  border-right: 0;
  font-size: 14px;      /* v·ª´a v·ªõi kh·ªëi */
  height: 30px;         /* b·∫±ng v·ªõi n√∫t */
  line-height: 30px;    /* canh s·ªë ch√≠nh gi·ªØa theo chi·ªÅu d·ªçc */
  padding: 0;
  box-sizing: border-box;
  -moz-appearance: textfield; /* cho Firefox */
}




/* --- N√∫t h√†nh ƒë·ªông --- */
.btn-green,
.btn-buy {
  font-size: 16px;
  padding: 12px 25px;
  border-radius: 50px;
  font-weight: 500;
  transition: 0.2s;
  cursor: pointer;
}

.btn-green {
  background: #08A045;
  color: #fff;
  border: none;
  margin-right: 10px;
}

.btn-green:hover {
  background: #067A34;
}

.btn-buy {
  background: #0F7B28;
  color: #fff;
  border: none;
}

.btn-buy:hover {
  background: #0C5E1F;
}

/* --- Tab & s·∫£n ph·∫©m kh√°c --- */
.tab-content {
  margin-top: 20px;
}

.other-products .card {
  border: none;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  transition: all 0.3s;
}

.other-products .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.other-products img {
  height: 180px;
  object-fit: cover;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

/* ===== CƒÇN CH·ªàNH 2 C·ªòT CHU·∫®N TMƒêT ===== */
.row-line {
  display: flex;
  align-items: center;
  margin: 12px 0;
}

.row-line label {
  width: 110px;              /* chi·ªÅu r·ªông c·ªë ƒë·ªãnh gi√∫p th·∫≥ng h√†ng */
  font-weight: 600;
  font-size: 15px;
  color: #333;
}

.row-line .content {
  display: flex;
  align-items: center;
  gap: 12px;
}
.product-image-box {
  display: flex;
  flex-direction: column;
   align-items: flex-start; /* ƒë·∫£m b·∫£o t·∫•t c·∫£ b√°m v·ªÅ b√™n tr√°i */
  gap: 12px;
}

.main-image {
  width: 100%;
  max-width: 450px;
  border-radius: 8px;
}

.thumb-list {
   display: flex;
  justify-content: start;
  gap: 10px;
}

.thumb {
  width: 70px;
  height: 80px;
  border-radius: 6px;
  object-fit: cover;
  cursor: pointer;
  border: 2px solid transparent;
  transition: 0.2s;
}

.thumb:hover {
  border-color: #16a34a;
}

.thumb.active {
  border-color: #16a34a;
}

  </style>
</head>
<body>
  <!-- Header -->
  <div id="header"></div>

  <main>
    <div id="detailContainer"></div>

   <ul class="nav nav-tabs mt-5" id="detailTabs">
  <li class="nav-item">
    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#descTab">M√¥ t·∫£ s·∫£n ph·∫©m</button>
  </li>
  <li class="nav-item">
    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#policyTab">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</button>
  </li>
</ul>

<div class="tab-content border p-4 rounded-bottom">
  <div class="tab-pane fade show active" id="descTab">

    <!-- PH·∫¶N N·ªòI DUNG T·ª∞ ƒê·ªòNG CH√àN -->
    <div id="descContent"></div>

  </div>

  <div class="tab-pane fade" id="policyTab">
  <h5><strong>Ch√≠nh s√°ch ho√†n h√†ng / tr·∫£ h√†ng</strong></h5>

  <h6 class="mt-3"><strong>1. ƒêi·ªÅu ki·ªán √°p d·ª•ng</strong></h6>
  <ul>
    <li>S·∫£n ph·∫©m l·ªói, h∆∞ h·ªèng trong qu√° tr√¨nh v·∫≠n chuy·ªÉn ho·∫∑c kh√¥ng ƒë√∫ng m√¥ t·∫£.</li>
    <li>S·∫£n ph·∫©m c√≤n nguy√™n tem, bao b√¨, ch∆∞a qua s·ª≠ d·ª•ng.</li>
    <li>Th·ªùi gian y√™u c·∫ßu ƒë·ªïi/tr·∫£: trong v√≤ng <strong>3 ng√†y</strong> k·ªÉ t·ª´ khi nh·∫≠n h√†ng.</li>
  </ul>

  <h6 class="mt-3"><strong>2. Quy tr√¨nh th·ª±c hi·ªán</strong></h6>
  <ul>
    <li>Li√™n h·ªá b·ªô ph·∫≠n ChƒÉm s√≥c kh√°ch h√†ng qua hotline ho·∫∑c email h·ªó tr·ª£.</li>
    <li>G·ª≠i h√¨nh ·∫£nh/video x√°c nh·∫≠n t√¨nh tr·∫°ng s·∫£n ph·∫©m.</li>
    <li>Sau khi ƒë∆∞·ª£c x√°c nh·∫≠n, kh√°ch h√†ng c√≥ th·ªÉ:</li>
    <ul>
      <li>ƒê·ªïi s·∫£n ph·∫©m m·ªõi c√πng lo·∫°i (mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn), ho·∫∑c</li>
      <li>Ho√†n ti·ªÅn 100% n·∫øu s·∫£n ph·∫©m thay th·∫ø kh√¥ng c√≤n s·∫µn h√†ng.</li>
    </ul>
  </ul>

  <h6 class="mt-3"><strong>3. L∆∞u √Ω</strong></h6>
  <ul>
    <li>Kh√¥ng √°p d·ª•ng ƒë·ªïi tr·∫£ cho s·∫£n ph·∫©m ƒë√£ m·ªü bao b√¨, s·ª≠ d·ª•ng ho·∫∑c kh√¥ng c√≤n tem ni√™m phong.</li>
    <li>Ch√∫ng t√¥i ch·ªãu to√†n b·ªô ph√≠ v·∫≠n chuy·ªÉn trong tr∆∞·ªùng h·ª£p l·ªói thu·ªôc v·ªÅ nh√† s·∫£n xu·∫•t.</li>
  </ul>
</div>
</div>


    <!-- C√°c s·∫£n ph·∫©m kh√°c -->
    <div class="other-products mt-5">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5>C√°c s·∫£n ph·∫©m kh√°c c·ªßa shop</h5>
        <a href="products.html" class="text-success fw-semibold text-decoration-none">Xem t·∫•t c·∫£</a>
      </div>
      <div class="row" id="relatedProducts"></div>
    </div>
  </main>

  <!-- Footer -->
  <div id="footer"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- üîó Import d·ªØ li·ªáu s·∫£n ph·∫©m -->
  <script src="products.js"></script>
  <script src="script.js"></script>
  <!-- üîó Script ch√≠nh -->
    <!-- üîó Script ch√≠nh -->
  <script>
    // === Load header & footer ===
  async function loadComponent(id, file, callback) {
    try {
      const res = await fetch(file);
      const html = await res.text();
      document.getElementById(id).innerHTML = html;
      if (callback) callback();
    } catch (err) {
      console.error(err);
    }
  }

  loadComponent("header", "header.html", () => {
    updateCartUI();
    const script = document.createElement("script");
    script.src = "header.js";
    document.body.appendChild(script);
  });

  loadComponent("footer", "footer.html");

  // === L·∫•y ID s·∫£n ph·∫©m t·ª´ URL ===
  const params = new URLSearchParams(window.location.search);
  const id = parseInt(params.get("id"));
  const product = products.find(p => p.id === id);
  const container = document.getElementById("detailContainer");

  if (product) {
    container.innerHTML = `
      <div class="product-detail">
        <div class="product-image-box">
  <img id="mainImage" src="${product.images[0]}" alt="${product.name}" class="main-image">
<div class="thumb-list">
    ${product.images.map((img, i) => `
      <img src="${img}" class="thumb ${i === 0 ? 'active' : ''}" data-index="${i}">
    `).join('')}
  </div>
  
</div>



        <div class="product-info">
          <h2>${product.name}</h2>

          <!-- Ch·ªçn lo·∫°i -->
          <div class="row-line">
            <label>Ch·ªçn lo·∫°i:</label>
            <div class="content" id="weightOptions">
              ${product.weights.map((w, i) => `
                <button class="option-btn ${i===0?'active':''}" data-index="${i}">${w}</button>
              `).join('')}
            </div>
          </div>

          <!-- Gi√° -->
          <div class="row-line">
            <label>Gi√°:</label>
            <div class="content price-box">
              <span class="price-main" id="priceDetail">${product.prices[0]}</span>
              <span class="old-price" id="oldPrice"></span>
            </div>
          </div>

          <!-- S·ªë l∆∞·ª£ng -->
          <div class="row-line">
            <label>S·ªë l∆∞·ª£ng:</label>
            <div class="content qty-box">
              <button class="qty-btn" onclick="changeQty(-1)">‚àí</button>
              <input type="number" id="qtyDetail" class="qty-input" value="1" min="1">
              <button class="qty-btn" onclick="changeQty(1)">+</button>
            </div>
          </div>

          <div class="mt-3">
            <button id="btnAdd" class="btn-green"><i class="fa fa-shopping-cart"></i> Th√™m v√†o gi·ªè</button>
            <button id="btnBuyNow" class="btn-buy">Mua ngay</button>
          </div>
        </div>
      </div>
    `;
  }
  // ========= Thumbnail click ===========
document.querySelectorAll(".thumb").forEach((thumb, index) => {
  thumb.addEventListener("click", () => {

    // ƒë·ªïi ·∫£nh ch√≠nh
    document.getElementById("mainImage").src = product.images[index];

    // active border
    document.querySelectorAll(".thumb").forEach(t => t.classList.remove("active"));
    thumb.classList.add("active");
  });
});


  // === TƒÉng gi·∫£m s·ªë l∆∞·ª£ng ===
  window.changeQty = function(type) {
    let qty = document.getElementById("qtyDetail");
    let val = parseInt(qty.value);
    if (type === -1 && val > 1) qty.value = val - 1;
    if (type === 1) qty.value = val + 1;
  }

  // === Ch·ªçn lo·∫°i s·∫£n ph·∫©m ===
  document.addEventListener("click", function(e) {
    if (e.target.classList.contains("option-btn")) {
      document.querySelectorAll(".option-btn").forEach(b => b.classList.remove("active"));
      e.target.classList.add("active");

      const i = parseInt(e.target.dataset.index);

      // C·∫≠p nh·∫≠t gi√° theo lo·∫°i
      document.getElementById("priceDetail").innerText = product.prices[i];

      // N·∫øu c√≥ oldPrices th√¨ hi·ªÉn th·ªã, kh√¥ng th√¨ xo√° tr·ªëng
      if (product.oldPrices && product.oldPrices[i]) {
        document.getElementById("oldPrice").innerText = product.oldPrices[i];
      } else {
        document.getElementById("oldPrice").innerText = "";
      }
    }
  });


// Th√™m v√†o gi·ªè
document.getElementById("btnAdd").addEventListener("click", () => {
  const qty = parseInt(document.getElementById("qtyDetail").value);
  const active = document.querySelector(".option-btn.active").dataset.index;

  addToCart(product, qty, product.weights[active], product.prices[active]);
  updateCartUI();
});

// Mua ngay
document.getElementById("btnBuyNow").addEventListener("click", () => {
  const qty = parseInt(document.getElementById("qtyDetail").value);
  const active = document.querySelector(".option-btn.active").dataset.index;

  addToCart(product, qty, product.weights[active], product.prices[active]);
  updateCartUI();
  window.location.href = "cart.html";
});



  // === Hi·ªÉn th·ªã s·∫£n ph·∫©m li√™n quan ===
  const relatedContainer = document.getElementById("relatedProducts");
  products.filter(p => p.id !== id).forEach(p => {
    relatedContainer.innerHTML += `
      <div class="col-md-3 mb-4">
        <div class="card h-100">
          <img src="${p.img}" class="card-img-top" alt="${p.name}">
          <div class="card-body">
            <h6>${p.name}</h6>
            <p class="text-success fw-bold">${p.prices[0]}</p>
            <a href="product-detail.html?id=${p.id}" class="btn btn-outline-success w-100 rounded-pill">Xem chi ti·∫øt</a>
          </div>
        </div>
      </div>
    `;
  });



  // === Sinh n·ªôi dung m√¥ t·∫£ t·ª´ data ===
if (product) {

  const descBox = document.getElementById("descContent");

  let benefitsHtml = "";
  if (Array.isArray(product.benefits)) {
    benefitsHtml = `
      <ul>
        ${product.benefits.map(b => `<li>${b}</li>`).join("")}
      </ul>
    `;
  } else {
    benefitsHtml = `<p>${product.benefits}</p>`;
  }

  let usageHtml = "";
  if (Array.isArray(product.usage)) {
    usageHtml = `
      <ul>
        ${product.usage.map(u => `<li>${u}</li>`).join("")}
      </ul>
    `;
  } else {
    usageHtml = `<p>${product.usage}</p>`;
  }

  descBox.innerHTML = `
    <h5><strong>M√¥ t·∫£:</strong></h5>
    <p>${product.description}</p>

    <h5 class="mt-3"><strong>Th√†nh ph·∫ßn:</strong></h5>
    <p>${product.ingredients}</p>

    <h5 class="mt-3"><strong>C√¥ng d·ª•ng:</strong></h5>
    ${benefitsHtml}

    <h5 class="mt-3"><strong>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</strong></h5>
    ${usageHtml}

    <h5 class="mt-3"><strong>C√°ch ƒë√≥ng g√≥i:</strong></h5>
    <p>${product.packaging}</p>

    <h5 class="mt-3"><strong>B·∫£o qu·∫£n:</strong></h5>
    <p>${product.storage}</p>
  `;
}

  </script>


</body>
</html>
